@model MakeYourPartyServer.Models.PartyViewModel
@{
    ViewBag.Title = "Party";
}

@using (Html.BeginForm("SearchVideo", "Party", FormMethod.Post))
{
    @Html.AntiForgeryToken()
    @Html.ValidationSummary("", new { @class = "text-danger" })


    <div class="jumbotron">
        <h1>Let's add some music?</h1>
        <div class="form-group">
            @*@Html.LabelFor(x => x.SearchText, new { @class = "col-md-2 control-label" })*@
            <div class="col-md-10">
                @Html.TextBoxFor(x => x.SearchText, new { @class = "form-control" })
            </div>
        </div>
        <input id="btn-search" value="Search Music" class="btn btn-primary btn-lg" />
    </div>
    
    <div id="div-search-videos-list" />

    <script src="~/Scripts/jquery-1.10.2.js" type="text/javascript"></script>

    <script>
    $(document).ready(function () {
        $("#btn-search").click(function () {
            $.ajax({
                type: 'POST',
                url: '@Url.Action("SearchMusics", "Party")',
                dataType: 'json',
                data: SearchText = $("#SearchText"),
                success: function (data) {
                    $.each(data, function (index) {
                        $("#div-search-videos-list").append("<h3>" + data[index].Title + "</h3>");
                        $("#div-search-videos-list").append("<p>" + data[index].Description + "</p>");
                        $("#div-search-videos-list").append(data[index].Thumbnail);
                        $("#div-search-videos-list").append("<input class='btn-add-to-playlist' value='Add to Playlist' type='button' id='" + data[index].VideoId + "' />");
                    });
                },
                error: function () {
                    alert('failure');
                }
            });
        });

        $("#div-search-videos-list").on("click", "input", function () {
            alert();
        });
        
    });
    </script>
}
